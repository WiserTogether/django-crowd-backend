===================================
Django Crowd Authentication Backend
===================================

This is the most basic authentication backend connecting crowd 
and django. 
I am a django-dummy therefore no fancy easy_install or whatever
installation. 
Installation is easy. Just copy those files next to yours and 
add 
AUTHENTICATION_BACKENDS = ('crowd.CrowdBackend.CrowdBackend',) 
to your settings.py. There are some config options:

'AUTH_CROWD_ALWAYS_UPDATE_USER': True,
'AUTH_CROWD_MIRROR_GROUPS': True,
'AUTH_CROWD_STAFF_GROUP': 'staff',
'AUTH_CROWD_SUPERUSER_GROUP': 'superuser',
'AUTH_CROWD_SERVER_URI': 'http://127.0.0.1:8095/crowd/services/SecurityServer?wsdl'
 
The first two don't really work. But I planned to make them work.

===========================
Django Crowd SSO Middleware
===========================

Even more fun than simple authentication against a crowd backend
is Single Sign On (SSO) with Crowd. It's more fun but also more
PITA. 
What I got working by now? Nothing! 
What I am trying? I set up a Crowd Server and a Jira Application
connected them and everything is fine. My browser has the crowd.token_key
cookie from Jira. Now I try to call isValidPrincipalToken via SOAP
and this call fails. The log crowd log file says:


2010-12-24 00:10:11,354 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl] validateUserToken: xGoRT85yVnlj5638vR64eQ00
2010-12-24 00:10:11,354 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl] genericValidateToken
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl] checking if the token is expired:
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl]        now:                    1293145811355
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl]        last accessed:  2010-12-24 00:08:44.727
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl]        difference:     86628
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl]        allowed elapse: 1800000
2010-12-24 00:10:11,355 http-8095-10 DEBUG [manager.token.factory.TokenKeyGeneratorImpl] Generating Token for principal: jira-administrators
2010-12-24 00:10:11,355 http-8095-10 DEBUG [manager.token.factory.TokenKeyGeneratorImpl] Adding remote address of 0:0:0:0:0:0:0:1%0
2010-12-24 00:10:11,355 http-8095-10 DEBUG [manager.token.factory.TokenKeyGeneratorImpl] Generating Token for principal: jira-administrators
2010-12-24 00:10:11,355 http-8095-10 DEBUG [manager.token.factory.TokenKeyGeneratorImpl] Adding remote address of 0:0:0:0:0:0:0:1%0
2010-12-24 00:10:11,355 http-8095-10 DEBUG [manager.token.factory.TokenKeyGeneratorImpl] Adding Random-Number of com.atlassian.crowd.model.authentication.ValidationFactor@25aeb7d6[name=Random-Number,value=6903775993425035979]
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl] Current Validation Factors: 
com.atlassian.crowd.model.authentication.ValidationFactor@71a755ed[name=remote_address,value=0:0:0:0:0:0:0:1%0]
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl] comparing existing token com.atlassian.crowd.model.token.Token@7a418863 with a validation token com.atlassian.crowd.model.token.Token@c78b6543
2010-12-24 00:10:11,355 http-8095-10 DEBUG [crowd.manager.authentication.TokenAuthenticationManagerImpl] The token keys don't match
2010-12-24 00:10:11,355 http-8095-10 DEBUG [mchange.v2.resourcepool.BasicResourcePool] trace com.mchange.v2.resourcepool.BasicResourcePool@7f38f3d1 [managed: 1, unused: 0, excluded: 0] (e.g. com.mchange.v2.c3p0.impl.NewPooledConnection@24060e78)
2010-12-24 00:10:11,355 http-8095-10 DEBUG [service.soap.xfire.XFireOutLoggingMethodHandler] SOAP service method: isValidPrincipalToken
        false
        


